"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const types_1=require("../../types");exports.default={parse:function(e,s){let t;this.branches=[],this.elseTemplates=[];const r=this.liquid.parser.parseStream(s).on("start",()=>this.branches.push({cond:e.args,templates:t=[]})).on("tag:elsif",e=>{this.branches.push({cond:e.args,templates:t=[]})}).on("tag:else",()=>t=this.elseTemplates).on("tag:endif",()=>r.stop()).on("template",e=>t.push(e)).on("end",()=>{throw new Error(`tag ${e.raw} not closed`)});r.start()},render:function*(e,s,t){const r=this.liquid.renderer;for(const s of this.branches){const n=yield new types_1.Expression(s.cond).value(e);if(types_1.isTruthy(n))return void(yield r.renderTemplates(s.templates,e,t))}yield r.renderTemplates(this.elseTemplates,e,t)}};