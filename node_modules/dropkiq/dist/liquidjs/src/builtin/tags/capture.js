"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const assert_1=require("../../util/assert"),lexical_1=require("../../parser/lexical"),re=new RegExp(`(${lexical_1.identifier.source})`);exports.default={parse:function(e,t){const r=e.args.match(re);assert_1.assert(r,`${e.args} not valid identifier`),this.variable=r[1],this.templates=[];const s=this.liquid.parser.parseStream(t);s.on("tag:endcapture",()=>s.stop()).on("template",e=>this.templates.push(e)).on("end",()=>{throw new Error(`tag ${e.raw} not closed`)}),s.start()},render:function*(e){const t=this.liquid.renderer,r=yield t.renderTemplates(this.templates,e);e.front()[this.variable]=r}};