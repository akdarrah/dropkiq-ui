"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const types_1=require("../../types");exports.default={parse:function(e,s){this.cond=e.args,this.cases=[],this.elseTemplates=[];let t=[];const r=this.liquid.parser.parseStream(s).on("tag:when",e=>{this.cases.push({val:e.args,templates:t=[]})}).on("tag:else",()=>t=this.elseTemplates).on("tag:endcase",()=>r.stop()).on("template",e=>t.push(e)).on("end",()=>{throw new Error(`tag ${e.raw} not closed`)});r.start()},render:function*(e,s,t){const r=this.liquid.renderer;for(let s=0;s<this.cases.length;s++){const a=this.cases[s];if((yield new types_1.Expression(a.val).value(e))===(yield new types_1.Expression(this.cond).value(e)))return void(yield r.renderTemplates(a.templates,e,t))}yield r.renderTemplates(this.elseTemplates,e,t)}};