"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const underscore_1=require("./underscore");function mkResolve(e){const t={then:t=>t(e),catch:()=>t};return t}function mkReject(e){const t={then:(n,r)=>r?r(e):t,catch:t=>t(e)};return t}function isThenable(e){return e&&underscore_1.isFunction(e.then)}function isCustomIterable(e){return e&&underscore_1.isFunction(e.next)&&underscore_1.isFunction(e.throw)&&underscore_1.isFunction(e.return)}function toThenable(e){return isThenable(e)?e:isCustomIterable(e)?function t(n){let r;try{r=e.next(n)}catch(e){return mkReject(e)}return r.done?mkResolve(r.value):toThenable(r.value).then(t,n=>{let r;try{r=e.throw(n)}catch(e){return mkReject(e)}return r.done?mkResolve(r.value):t(r.value)})}():mkResolve(e)}function toValue(e){let t;return toThenable(e).then(e=>(t=e,mkResolve(t))).catch(e=>{throw e}),t}exports.toThenable=toThenable,exports.toValue=toValue;