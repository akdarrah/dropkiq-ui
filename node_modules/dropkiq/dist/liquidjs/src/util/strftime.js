"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const underscore_1=require("./underscore"),rFormat=/%([-_0^#:]+)?(\d+)?([EO])?(.)/,monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNamesShort=monthNames.map(abbr),dayNamesShort=dayNames.map(abbr),suffixes={1:"st",2:"nd",3:"rd",default:"th"};function abbr(e){return e.slice(0,3)}function daysInMonth(e){return[31,isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31]}function getDayOfYear(e){let t=0;for(let r=0;r<e.getMonth();++r)t+=daysInMonth(e)[r];return t+e.getDate()}function getWeekOfYear(e,t){const r=getDayOfYear(e)+(t-e.getDay()),a=7-new Date(e.getFullYear(),0,1).getDay()+t;return String(Math.floor((r-a)/7)+1)}function isLeapYear(e){const t=e.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))}function getSuffix(e){const t=e.getDate().toString(),r=parseInt(t.slice(-1));return suffixes[r]||suffixes.default}function century(e){return parseInt(e.getFullYear().toString().substring(0,2),10)}const padWidths={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},padChars={a:" ",A:" ",b:" ",B:" ",c:" ",e:" ",k:" ",l:" ",p:" ",P:" "},formatCodes={a:e=>dayNamesShort[e.getDay()],A:e=>dayNames[e.getDay()],b:e=>monthNamesShort[e.getMonth()],B:e=>monthNames[e.getMonth()],c:e=>e.toLocaleString(),C:e=>century(e),d:e=>e.getDate(),e:e=>e.getDate(),H:e=>e.getHours(),I:e=>String(e.getHours()%12||12),j:e=>getDayOfYear(e),k:e=>e.getHours(),l:e=>String(e.getHours()%12||12),L:e=>e.getMilliseconds(),m:e=>e.getMonth()+1,M:e=>e.getMinutes(),N:(e,t)=>{const r=Number(t.width)||9,a=String(e.getMilliseconds()).substr(0,r);return underscore_1.padEnd(a,r,"0")},p:e=>e.getHours()<12?"AM":"PM",P:e=>e.getHours()<12?"am":"pm",q:e=>getSuffix(e),s:e=>Math.round(e.valueOf()/1e3),S:e=>e.getSeconds(),u:e=>e.getDay()||7,U:e=>getWeekOfYear(e,0),w:e=>e.getDay(),W:e=>getWeekOfYear(e,1),x:e=>e.toLocaleDateString(),X:e=>e.toLocaleTimeString(),y:e=>e.getFullYear().toString().substring(2,4),Y:e=>e.getFullYear(),z:(e,t)=>{const r=e.getTimezoneOffset(),a=Math.abs(r),n=Math.floor(a/60),o=a%60;return(r>0?"-":"+")+underscore_1.padStart(n,2,"0")+(t.flags[":"]?":":"")+underscore_1.padStart(o,2,"0")},t:()=>"\t",n:()=>"\n","%":()=>"%"};function default_1(e,t){let r,a="",n=t;for(;r=rFormat.exec(n);)a+=n.slice(0,r.index),n=n.slice(r.index+r[0].length),a+=format(e,r);return a+n}function format(e,t){const[r,a="",n,o,s]=t,u=formatCodes[s];if(!u)return r;const d={};for(const e of a)d[e]=!0;let g=String(u(e,{flags:d,width:n,modifier:o})),i=padChars[s]||"0",f=n||padWidths[s]||0;return d["^"]?g=g.toUpperCase():d["#"]&&(g=underscore_1.changeCase(g)),d._?i=" ":d[0]&&(i="0"),d["-"]&&(f=0),underscore_1.padStart(g,f,i)}formatCodes.h=formatCodes.b,exports.default=default_1;