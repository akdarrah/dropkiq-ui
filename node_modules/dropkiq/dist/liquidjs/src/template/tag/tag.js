"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const underscore_1=require("../../util/underscore"),assert_1=require("../../util/assert"),template_1=require("../../template/template"),types_1=require("../../types");class Tag extends template_1.Template{constructor(e,t,s){super(e),this.name=e.name;const r=Tag.impls[e.name];assert_1.assert(r,`tag ${e.name} not found`),this.impl=Object.create(r),this.impl.liquid=s,this.impl.parse&&this.impl.parse(e,t)}*render(e,t){const s=yield types_1.Hash.create(this.token.args,e),r=this.impl;if(underscore_1.isFunction(r.render))return yield r.render(e,s,t)}static register(e,t){Tag.impls[e]=t}static clear(){Tag.impls={}}}exports.Tag=Tag,Tag.impls={};