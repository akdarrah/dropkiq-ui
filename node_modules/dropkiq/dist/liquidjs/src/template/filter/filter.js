"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const expression_1=require("../../render/expression"),underscore_1=require("../../util/underscore");class Filter{constructor(e,r,s){const i=Filter.impls[e];if(!i&&s)throw new TypeError(`undefined filter: ${e}`);this.name=e,this.impl=i||underscore_1.identify,this.args=r}*render(e,r){const s=[];for(const e of this.args)isKeyValuePair(e)?s.push([e[0],yield new expression_1.Expression(e[1]).evaluate(r)]):s.push(yield new expression_1.Expression(e).evaluate(r));return this.impl.apply({context:r},[e,...s])}static register(e,r){Filter.impls[e]=r}static clear(){Filter.impls={}}}function isKeyValuePair(e){return underscore_1.isArray(e)}exports.Filter=Filter,Filter.impls={};