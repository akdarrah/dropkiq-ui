"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const error_1=require("../util/error"),parse_stream_1=require("./parse-stream"),tag_token_1=require("./tag-token"),output_token_1=require("./output-token"),tag_1=require("../template/tag/tag"),output_1=require("../template/output"),html_1=require("../template/html");class Parser{constructor(e){this.liquid=e}parse(e){let t;const r=[];for(;t=e.shift();)r.push(this.parseToken(t,e));return r}parseToken(e,t){try{return tag_token_1.TagToken.is(e)?new tag_1.Tag(e,t,this.liquid):output_token_1.OutputToken.is(e)?new output_1.Output(e,this.liquid.options.strictFilters):new html_1.HTML(e)}catch(t){throw new error_1.ParseError(t,e)}}parseStream(e){return new parse_stream_1.ParseStream(e,(e,t)=>this.parseToken(e,t))}}exports.default=Parser;