"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=require("./constants");class CaretTagFinder{constructor(t,e,n){this.tokens=t,this.caretRow=e,this.caretColumn=n,this.tokenLine=this.caretRow+1,this.tokenColumn=this.caretColumn+1}findState(){let t=constants_1.HTML,e=this.findCaretToken();if(void 0===e)return t;switch(e.type){case"html":t=constants_1.HTML;break;case"output":t=constants_1.OUTPUT;break;case"tag":t=constants_1.TAG}return t}findCaretLiquidPosition(){let t=this.findCaretToken();return t?this.tokenColumn-t.col:0}findCaretToken(){return this.tokens.find((t,e)=>{let n=this.tokens[e+1];return t.line==this.tokenLine&&this.tokenColumn>=t.col&&(null==n||this.tokenColumn<n.col||n.line>this.tokenLine)})}}exports.CaretTagFinder=CaretTagFinder;